<?php /** * @package Spider Catalog * @author Web-Dorado * @copyright (C) 2012 Web-Dorado. All rights reserved. * @license GNU/GPLv3 http://www.gnu.org/licenses/gpl-3.0.html **/defined('_JEXEC') or die('Restricted access');class JElementColor extends JElement{function fetchElement($name, $value, &$node, $control_name){        ob_start();        $img=JUri::root()."/administrator/components/com_spidershop/elements/moorainbow/images/rainbow.png";        $imgx=JUri::root()."/administrator/components/com_spidershop/elements/moorainbow/images/";        static $embedded;                if(!$embedded)        {            $css2=JUri::root()."/administrator/components/com_spidershop/elements/moorainbow/mooRainbow.css";            $jspath=JUri::root()."/administrator/components/com_spidershop/elements/moorainbow/";             ?><link rel="stylesheet" type="text/css" href="<?php echo $css2 ?>" /><script src="<?php echo $jspath; ?>mootools.js" type="text/javascript"></script><script src="<?php echo $jspath; ?>mooRainbow.js" type="text/javascript"></script>            <?php            $embedded=true;        ?><script>            window.addEvent('domready',function(){//Get sibling function from http://www.sanjeevshrestha.com.np                Element.extend({                    getSiblings: function() {                        return this.getParent().getChildren().remove(this);                    }                });				  $$('.rainbowbtn').each(function(item){colorval=item.getSiblings()[0].value;		        item.color=new MooRainbow(item.id, {							startColor: [parseInt(colorval.substring(1,3),16), parseInt(colorval.substring(3,5),16), parseInt(colorval.substring(5,7),16)],  wheel: true,  id:item.id+'x',  onChange: function(color) {  					  item.style.backgroundColor=color.hex;  item.getSiblings()[0].value = color.hex;},  onComplete: function(color) {  item.getSiblings()[0].value = color.hex;  },  imgPath: '<?php echo $imgx;?>'        });      });  });	      </script>            <?php        }            ?>     <label>	<!--input id="myInput" name="myInput" type="text" /-->    <input name="<?php echo $control_name."[".$name."]";?>" type="text" class="inputbox" id="<?php echo  $control_name.$name ?>" value="<?php echo $value;?>" size="10" /><input type="text" style="background:<?php echo $value;?>" readonly="readonly" size="1" id="<?php echo  $control_name.$name.'_show' ?>" class="rainbowbtn" />    </label>        <?php        $content=ob_get_contents();        ob_end_clean();        return $content;    }	}		?>